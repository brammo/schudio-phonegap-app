(function(e,t){function o(t){e.extend(true,n,t)}function u(n,r,i){function D(e){if(!d){P()}else{z();U();et();q(e)}}function P(){v=r.theme?"ui":"fc";n.addClass("fc");if(r.isRTL){n.addClass("fc-rtl")}else{n.addClass("fc-ltr")}if(r.theme){n.addClass("ui-widget")}d=e("<div class='fc-content' style='position:relative'/>").prependTo(n);h=new a(o,r);p=h.render();if(p){n.prepend(p)}I(r.defaultView);e(window).resize(X);if(!F()){H()}}function H(){setTimeout(function(){if(!b.start&&F()){q()}},0)}function B(){e(window).unbind("resize",X);h.destroy();d.remove();n.removeClass("fc fc-rtl ui-widget")}function j(){return l.offsetWidth!==0}function F(){return e("body")[0].offsetWidth!==0}function I(t){if(!b||t!=b.name){k++;nt();var n=b;var r;if(n){(n.beforeHide||Y)();G(d,d.height());n.element.hide()}else{G(d,1)}d.css("overflow","hidden");b=w[t];if(b){b.element.show()}else{b=w[t]=new s[t](r=T=e("<div class='fc-view fc-view-"+t+"' style='position:absolute'/>").appendTo(d),o)}if(n){h.deactivateButton(n.name)}h.activateButton(t);q();d.css("overflow","");if(n){G(d,1)}if(!r){(b.afterShow||Y)()}k--}}function q(e){if(j()){k++;nt();if(x===t){z()}var r=false;if(!b.start||e||L<b.start||L>=b.end){b.render(L,e||0);W(true);r=true}else if(b.sizeDirty){b.clearEvents();W();r=true}else if(b.eventsDirty){b.clearEvents();r=true}b.sizeDirty=false;b.eventsDirty=false;V(r);E=n.outerWidth();h.updateTitle(b.title);var i=new Date;if(i>=b.start&&i<b.end){h.disableButton("today")}else{h.enableButton("today")}k--;b.trigger("viewDisplay",l)}}function R(){U();if(j()){z();W();nt();b.clearEvents();b.renderEvents(A);b.sizeDirty=false}}function U(){e.each(w,function(e,t){t.sizeDirty=true})}function z(){if(r.contentHeight){x=r.contentHeight}else if(r.height){x=r.height-(p?p.height():0)-$(d)}else{x=Math.round(d.width()/Math.max(r.aspectRatio,.5))}}function W(e){k++;b.setHeight(x,e);if(T){T.css("position","relative");T=null}b.setWidth(d.width(),e);k--}function X(){if(!k){if(b.start){var e=++N;setTimeout(function(){if(e==N&&!k&&j()){if(E!=(E=n.outerWidth())){k++;R();b.trigger("windowResize",l);k--}}},200)}else{H()}}}function V(e){if(!r.lazyFetching||u(b.visStart,b.visEnd)){J()}else if(e){Z()}}function J(){f(b.visStart,b.visEnd)}function K(e){A=e;Z()}function Q(e){Z(e)}function Z(e){et();if(j()){b.clearEvents();b.renderEvents(A,e);b.eventsDirty=false}}function et(){e.each(w,function(e,t){t.eventsDirty=true})}function tt(e,n,r){b.select(e,n,r===t?true:r)}function nt(){if(b){b.unselect()}}function rt(){q(-1)}function it(){q(1)}function st(){m(L,-1);q()}function ot(){m(L,1);q()}function ut(){L=new Date;q()}function at(e,t,n){if(e instanceof Date){L=S(e)}else{C(L,e,t,n)}q()}function ft(e,n,r){if(e!==t){m(L,e)}if(n!==t){g(L,n)}if(r!==t){y(L,r)}q()}function lt(){return S(L)}function ct(){return b}function ht(e,n){if(n===t){return r[e]}if(e=="height"||e=="contentHeight"||e=="aspectRatio"){r[e]=n;R()}}function pt(e,t){if(r[e]){return r[e].apply(t||l,Array.prototype.slice.call(arguments,2))}}var o=this;o.options=r;o.render=D;o.destroy=B;o.refetchEvents=J;o.reportEvents=K;o.reportEventChange=Q;o.rerenderEvents=Z;o.changeView=I;o.select=tt;o.unselect=nt;o.prev=rt;o.next=it;o.prevYear=st;o.nextYear=ot;o.today=ut;o.gotoDate=at;o.incrementDate=ft;o.formatDate=function(e,t){return O(e,t,r)};o.formatDates=function(e,t,n){return M(e,t,n,r)};o.getDate=lt;o.getView=ct;o.option=ht;o.trigger=pt;c.call(o,r,i);var u=o.isFetchNeeded;var f=o.fetchEvents;var l=n[0];var h;var p;var d;var v;var b;var w={};var E;var x;var T;var N=0;var k=0;var L=new Date;var A=[];var _;C(L,r.year,r.month,r.date);if(r.droppable){e(document).bind("dragstart",function(t,n){var i=t.target;var s=e(i);if(!s.parents(".fc").length){var o=r.dropAccept;if(e.isFunction(o)?o.call(i,s):s.is(o)){_=i;b.dragStart(_,t,n)}}}).bind("dragstop",function(e,t){if(_){b.dragStop(_,e,t);_=null}})}}function a(t,n){function u(){o=n.theme?"ui":"fc";var t=n.header;if(t){i=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(f("left")).append(f("center")).append(f("right")));return i}}function a(){i.remove()}function f(r){var i=e("<td class='fc-header-"+r+"'/>");var u=n.header[r];if(u){e.each(u.split(" "),function(r){if(r>0){i.append("<span class='fc-header-space'/>")}var u;e.each(this.split(","),function(r,a){if(a=="title"){i.append("<span class='fc-header-title'><h2> </h2></span>");if(u){u.addClass(o+"-corner-right")}u=null}else{var f;if(t[a]){f=t[a]}else if(s[a]){f=function(){h.removeClass(o+"-state-hover");t.changeView(a)}}if(f){var l=n.theme?nt(n.buttonIcons,a):null;var c=nt(n.buttonText,a);var h=e("<span class='fc-button fc-button-"+a+" "+o+"-state-default'>"+(l?"<span class='fc-icon-wrap'>"+"<span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){if(!h.hasClass(o+"-state-disabled")){f()}}).mousedown(function(){h.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){h.removeClass(o+"-state-down")}).hover(function(){h.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){h.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(i);st(h);if(!u){h.addClass(o+"-corner-left")}u=h}}});if(u){u.addClass(o+"-corner-right")}})}return i}function l(e){i.find("h2").html(e)}function c(e){i.find("span.fc-button-"+e).addClass(o+"-state-active")}function h(e){i.find("span.fc-button-"+e).removeClass(o+"-state-active")}function p(e){i.find("span.fc-button-"+e).addClass(o+"-state-disabled")}function d(e){i.find("span.fc-button-"+e).removeClass(o+"-state-disabled")}var r=this;r.render=u;r.destroy=a;r.updateTitle=l;r.activateButton=c;r.deactivateButton=h;r.disableButton=p;r.enableButton=d;var i=e([]);var o}function c(n,r){function w(e,t){return!p||e<p||t>d}function E(e,t){p=e;d=t;y=[];var n=++v;var r=h.length;m=r;for(var i=0;i<r;i++){x(h[i],n)}}function x(t,r){T(t,function(i){if(r==v){if(i){if(n.eventDataTransform){i=e.map(i,n.eventDataTransform)}if(t.eventDataTransform){i=e.map(i,t.eventDataTransform)}for(var s=0;s<i.length;s++){i[s].source=t;H(i[s])}y=y.concat(i)}m--;if(!m){a(y)}}})}function T(t,r){var s;var o=i.sourceFetchers;var u;for(s=0;s<o.length;s++){u=o[s](t,p,d,r);if(u===true){return}else if(typeof u=="object"){T(u,r);return}}var a=t.events;if(a){if(e.isFunction(a)){D();a(S(p),S(d),function(e){r(e);P()})}else if(e.isArray(a)){r(a)}else{r()}}else{var l=t.url;if(l){var c=t.success;var h=t.error;var v=t.complete;var m=e.extend({},t.data||{});var g=lt(t.startParam,n.startParam);var y=lt(t.endParam,n.endParam);if(g){m[g]=Math.round(+p/1e3)}if(y){m[y]=Math.round(+d/1e3)}D();e.ajax(e.extend({},f,t,{data:m,success:function(t){t=t||[];var n=ft(c,this,arguments);if(e.isArray(n)){t=n}r(t)},error:function(){ft(h,this,arguments);r()},complete:function(){ft(v,this,arguments);P()}}))}else{r()}}}function N(e){e=C(e);if(e){m++;x(e,v)}}function C(t){if(e.isFunction(t)||e.isArray(t)){t={events:t}}else if(typeof t=="string"){t={url:t}}if(typeof t=="object"){B(t);h.push(t);return t}}function L(t){h=e.grep(h,function(e){return!j(e,t)});y=e.grep(y,function(e){return!j(e.source,t)});a(y)}function A(e){var t,n=y.length,r,i=u().defaultEventEnd,s=e.start-e._start,o=e.end?e.end-(e._end||i(e)):0;for(t=0;t<n;t++){r=y[t];if(r._id==e._id&&r!=e){r.start=new Date(+r.start+s);if(e.end){if(r.end){r.end=new Date(+r.end+o)}else{r.end=new Date(+i(r)+o)}}else{r.end=null}r.title=e.title;r.url=e.url;r.allDay=e.allDay;r.className=e.className;r.editable=e.editable;r.color=e.color;r.backgroudColor=e.backgroudColor;r.borderColor=e.borderColor;r.textColor=e.textColor;H(r)}}H(e);a(y)}function O(e,t){H(e);if(!e.source){if(t){c.events.push(e);e.source=c}y.push(e)}a(y)}function M(t){if(!t){y=[];for(var n=0;n<h.length;n++){if(e.isArray(h[n].events)){h[n].events=[]}}}else{if(!e.isFunction(t)){var r=t+"";t=function(e){return e._id==r}}y=e.grep(y,t,true);for(var n=0;n<h.length;n++){if(e.isArray(h[n].events)){h[n].events=e.grep(h[n].events,t,true)}}}a(y)}function _(t){if(e.isFunction(t)){return e.grep(y,t)}else if(t){t+="";return e.grep(y,function(e){return e._id==t})}return y}function D(){if(!(g++)){o("loading",null,true)}}function P(){if(!--g){o("loading",null,false)}}function H(e){var r=e.source||{};var i=lt(r.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+l++:e.id+"");if(e.date){if(!e.start){e.start=e.date}delete e.date}e._start=S(e.start=k(e.start,i));e.end=k(e.end,i);if(e.end&&e.end<=e.start){e.end=null}e._end=e.end?S(e.end):null;if(e.allDay===t){e.allDay=lt(r.allDayDefault,n.allDayDefault)}if(e.className){if(typeof e.className=="string"){e.className=e.className.split(/\s+/)}}else{e.className=[]}}function B(e){if(e.className){if(typeof e.className=="string"){e.className=e.className.split(/\s+/)}}else{e.className=[]}var t=i.sourceNormalizers;for(var n=0;n<t.length;n++){t[n](e)}}function j(e,t){return e&&t&&F(e)==F(t)}function F(e){return(typeof e=="object"?e.events||e.url:"")||e}var s=this;s.isFetchNeeded=w;s.fetchEvents=E;s.addEventSource=N;s.removeEventSource=L;s.updateEvent=A;s.renderEvent=O;s.removeEvents=M;s.clientEvents=_;s.normalizeEvent=H;var o=s.trigger;var u=s.getView;var a=s.reportEvents;var c={events:[]};var h=[c];var p,d;var v=0;var m=0;var g=0;var y=[];for(var b=0;b<r.length;b++){C(r[b])}}function m(e,t,n){e.setFullYear(e.getFullYear()+t);if(!n){E(e)}return e}function g(e,t,n){if(+e){var r=e.getMonth()+t,i=S(e);i.setDate(1);i.setMonth(r);e.setMonth(r);if(!n){E(e)}while(e.getMonth()!=i.getMonth()){e.setDate(e.getDate()+(e<i?1:-1))}}return e}function y(e,t,n){if(+e){var r=e.getDate()+t,i=S(e);i.setHours(9);i.setDate(r);e.setDate(r);if(!n){E(e)}b(e,i)}return e}function b(e,t){if(+e){while(e.getDate()!=t.getDate()){e.setTime(+e+(e<t?1:-1)*d)}}}function w(e,t){e.setMinutes(e.getMinutes()+t);return e}function E(e){e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);return e}function S(e,t){if(t){return E(new Date(+e))}return new Date(+e)}function x(){var e=0,t;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function T(e,t,n){t=t||1;while(!e.getDay()||n&&e.getDay()==1||!n&&e.getDay()==6){y(e,t)}return e}function N(e,t){return Math.round((S(e,true)-S(t,true))/p)}function C(e,n,r,i){if(n!==t&&n!=e.getFullYear()){e.setDate(1);e.setMonth(0);e.setFullYear(n)}if(r!==t&&r!=e.getMonth()){e.setDate(1);e.setMonth(r)}if(i!==t){e.setDate(i)}}function k(e,n){if(typeof e=="object"){return e}if(typeof e=="number"){return new Date(e*1e3)}if(typeof e=="string"){if(e.match(/^\d+(\.\d+)?$/)){return new Date(parseFloat(e)*1e3)}if(n===t){n=true}return L(e,n)||(e?new Date(e):null)}return null}function L(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n){return null}var r=new Date(n[1],0,1);if(t||!n[13]){var i=new Date(n[1],0,1,9,0);if(n[3]){r.setMonth(n[3]-1);i.setMonth(n[3]-1)}if(n[5]){r.setDate(n[5]);i.setDate(n[5])}b(r,i);if(n[7]){r.setHours(n[7])}if(n[8]){r.setMinutes(n[8])}if(n[10]){r.setSeconds(n[10])}if(n[12]){r.setMilliseconds(Number("0."+n[12])*1e3)}b(r,i)}else{r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1);r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?Number("0."+n[12])*1e3:0);if(n[14]){var s=Number(n[16])*60+(n[18]?Number(n[18]):0);s*=n[15]=="-"?1:-1;r=new Date(+r+s*60*1e3)}}return r}function A(e){if(typeof e=="number"){return e*60}if(typeof e=="object"){return e.getHours()*60+e.getMinutes()}var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);if(t[3]){n%=12;if(t[3].toLowerCase().charAt(0)=="p"){n+=12}}return n*60+(t[2]?parseInt(t[2],10):0)}}function O(e,t,n){return M(e,null,t,n)}function M(e,t,r,i){i=i||n;var s=e,o=t,u,a=r.length,f,l,c,h="";for(u=0;u<a;u++){f=r.charAt(u);if(f=="'"){for(l=u+1;l<a;l++){if(r.charAt(l)=="'"){if(s){if(l==u+1){h+="'"}else{h+=r.substring(u+1,l)}u=l}break}}}else if(f=="("){for(l=u+1;l<a;l++){if(r.charAt(l)==")"){var p=O(s,r.substring(u+1,l),i);if(parseInt(p.replace(/\D/,""),10)){h+=p}u=l;break}}}else if(f=="["){for(l=u+1;l<a;l++){if(r.charAt(l)=="]"){var d=r.substring(u+1,l);var p=O(s,d,i);if(p!=O(o,d,i)){h+=p}u=l;break}}}else if(f=="{"){s=t;o=e}else if(f=="}"){s=e;o=t}else{for(l=a;l>u;l--){if(c=_[r.substring(u,l)]){if(s){h+=c(s,i)}u=l-1;break}}if(l==u){if(s){h+=f}}}}return h}function D(e){var t;var n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));t=n.getTime();n.setMonth(0);n.setDate(1);return Math.floor(Math.round((t-n)/864e5)/7)+1}function P(e){if(e.end){return H(e.end,e.allDay)}else{return y(S(e.start),1)}}function H(e,t){e=S(e);return t||e.getHours()||e.getMinutes()?y(e,1):E(e)}function B(e,t){return(t.msLength-e.msLength)*100+(e.event.start-t.event.start)}function j(e,t){return e.end>t.start&&e.start<t.end}function F(e,t,n,r){var i=[],s,o=e.length,u,a,f,l,c,h,p;for(s=0;s<o;s++){u=e[s];a=u.start;f=t[s];if(f>n&&a<r){if(a<n){l=S(n);h=false}else{l=a;h=true}if(f>r){c=S(r);p=false}else{c=f;p=true}i.push({event:u,start:l,end:c,isStart:h,isEnd:p,msLength:c-l})}}return i.sort(B)}function I(e){var t=[],n,r=e.length,i,s,o,u;for(n=0;n<r;n++){i=e[n];s=0;while(true){o=false;if(t[s]){for(u=0;u<t[s].length;u++){if(j(t[s][u],i)){o=true;break}}}if(o){s++}else{break}}if(t[s]){t[s].push(i)}else{t[s]=[i]}}return t}function q(n,r,i){n.unbind("mouseover").mouseover(function(n){var s=n.target,o,u,a;while(s!=this){o=s;s=s.parentNode}if((u=o._fci)!==t){o._fci=t;a=r[u];i(a.event,a.element,a);e(n.target).trigger(n)}n.stopPropagation()})}function R(t,n,r){for(var i=0,s;i<t.length;i++){s=e(t[i]);s.width(Math.max(0,n-z(s,r)))}}function U(t,n,r){for(var i=0,s;i<t.length;i++){s=e(t[i]);s.height(Math.max(0,n-$(s,r)))}}function z(e,t){return W(e)+V(e)+(t?X(e):0)}function W(t){return(parseFloat(e.css(t[0],"paddingLeft",true))||0)+(parseFloat(e.css(t[0],"paddingRight",true))||0)}function X(t){return(parseFloat(e.css(t[0],"marginLeft",true))||0)+(parseFloat(e.css(t[0],"marginRight",true))||0)}function V(t){return(parseFloat(e.css(t[0],"borderLeftWidth",true))||0)+(parseFloat(e.css(t[0],"borderRightWidth",true))||0)}function $(e,t){return J(e)+Q(e)+(t?K(e):0)}function J(t){return(parseFloat(e.css(t[0],"paddingTop",true))||0)+(parseFloat(e.css(t[0],"paddingBottom",true))||0)}function K(t){return(parseFloat(e.css(t[0],"marginTop",true))||0)+(parseFloat(e.css(t[0],"marginBottom",true))||0)}function Q(t){return(parseFloat(e.css(t[0],"borderTopWidth",true))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",true))||0)}function G(e,t){t=typeof t=="number"?t+"px":t;e.each(function(e,n){n.style.cssText+=";min-height:"+t+";_height:"+t})}function Y(){}function Z(e,t){return e-t}function et(e){return Math.max.apply(Math,e)}function tt(e){return(e<10?"0":"")+e}function nt(e,n){if(e[n]!==t){return e[n]}var r=n.split(/(?=[A-Z])/),i=r.length-1,s;for(;i>=0;i--){s=e[r[i].toLowerCase()];if(s!==t){return s}}return e[""]}function rt(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/'/g,"&#039;").replace(/"/g,'"').replace(/\n/g,"<br />")}function it(e){return e.id+"/"+e.className+"/"+e.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function st(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function ot(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function ut(e,t){e.each(function(e,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+h[t.getDay()])})}function at(e,t){var n=e.source||{};var r=e.color;var i=n.color;var s=t("eventColor");var o=e.backgroundColor||r||n.backgroundColor||i||t("eventBackgroundColor")||s;var u=e.borderColor||r||n.borderColor||i||t("eventBorderColor")||s;var a=e.textColor||n.textColor||t("eventTextColor");var f=[];if(o){f.push("background-color:"+o)}if(u){f.push("border-color:"+u)}if(a){f.push("color:"+a)}return f.join(";")}function ft(t,n,r){if(e.isFunction(t)){t=[t]}if(t){var i;var s;for(i=0;i<t.length;i++){s=t[i].apply(n,r)||s}return s}}function lt(){for(var e=0;e<arguments.length;e++){if(arguments[e]!==t){return arguments[e]}}}function ct(e,t){function o(e,t){if(t){g(e,t);e.setDate(1)}var o=S(e,true);o.setDate(1);var u=g(S(o),1);var a=S(o);var f=S(u);var l=r("firstDay");var c=r("weekends")?0:1;if(c){T(a);T(f,-1,true)}y(a,-((a.getDay()-Math.max(l,c)+7)%7));y(f,(7-f.getDay()+Math.max(l,c))%7);var h=Math.round((f-a)/(p*7));if(r("weekMode")=="fixed"){y(f,(6-h)*7);h=6}n.title=s(o,r("titleFormat"));n.start=o;n.end=u;n.visStart=a;n.visEnd=f;i(h,c?5:7,true)}var n=this;n.render=o;dt.call(n,e,t,"month");var r=n.opt;var i=n.renderBasic;var s=t.formatDate}function ht(e,t){function o(e,t){if(t){y(e,t*7)}var o=y(S(e),-((e.getDay()-r("firstDay")+7)%7));var u=y(S(o),7);var a=S(o);var f=S(u);var l=r("weekends");if(!l){T(a);T(f,-1,true)}n.title=s(a,y(S(f),-1),r("titleFormat"));n.start=o;n.end=u;n.visStart=a;n.visEnd=f;i(1,l?7:5,false)}var n=this;n.render=o;dt.call(n,e,t,"basicWeek");var r=n.opt;var i=n.renderBasic;var s=t.formatDates}function pt(e,t){function o(e,t){if(t){y(e,t);if(!r("weekends")){T(e,t<0?-1:1)}}n.title=s(e,r("titleFormat"));n.start=n.visStart=S(e,true);n.end=n.visEnd=y(S(n.start),1);i(1,1,false)}var n=this;n.render=o;dt.call(n,e,t,"basicDay");var r=n.opt;var i=n.renderBasic;var s=t.formatDate}function dt(t,n,r){function J(e,t,n){M=e;_=t;K();var r=!m;if(r){Q()}else{u()}Y(n)}function K(){B=s("isRTL");if(B){j=-1;F=_-1}else{j=1;F=0}I=s("firstDay");q=s("weekends")?0:1;U=s("theme")?"ui":"fc";z=s("columnFormat");W=s("weekNumbers");X=s("weekNumberTitle");if(s("weekNumberCalculation")!="iso"){V="w"}else{V="W"}}function Q(){T=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function Y(n){var r="";var s,u;var a=U+"-widget-header";var f=U+"-widget-content";var l=i.start.getMonth();var y=E(new Date);var S;var T;var N;r+="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+"<thead>"+"<tr>";if(W){r+="<th class='fc-week-number "+a+"'/>"}for(s=0;s<_;s++){S=bt(0,s);r+="<th class='fc-day-header fc-"+h[S.getDay()]+" "+a+"'/>"}r+="</tr>"+"</thead>"+"<tbody>";for(s=0;s<M;s++){r+="<tr class='fc-week'>";if(W){r+="<td class='fc-week-number "+f+"'>"+"<div/>"+"</td>"}for(u=0;u<_;u++){S=bt(s,u);T=["fc-day","fc-"+h[S.getDay()],f];if(S.getMonth()!=l){T.push("fc-other-month")}if(+S==+y){T.push("fc-today");T.push(U+"-state-highlight")}r+="<td"+" class='"+T.join(" ")+"'"+" data-date='"+c(S,"yyyy-MM-dd")+"'"+">"+"<div>";if(n){r+="<div class='fc-day-number'>"+S.getDate()+"</div>"}r+="<div class='fc-day-content'>"+"<div style='position:relative'> </div>"+"</div>"+"</div>"+"</td>"}r+="</tr>"}r+="</tbody>"+"</table>";Ot();if(p){p.remove()}p=e(r).appendTo(t);d=p.find("thead");v=d.find(".fc-day-header");m=p.find("tbody");g=m.find("tr");b=m.find(".fc-day");w=g.find("td:first-child");x=g.eq(0).find(".fc-day-content > div");ot(d.add(d.find("tr")));ot(g);g.eq(0).addClass("fc-first");g.filter(":last").addClass("fc-last");if(W){d.find(".fc-week-number").text(X)}v.each(function(t,n){var r=wt(t);e(n).text(c(r,z))});if(W){m.find(".fc-week-number > div").each(function(t,n){var r=bt(t,0);e(n).text(c(r,V))})}b.each(function(t,n){var r=wt(t);o("dayRender",i,r,e(n))});tt(b)}function Z(t){k=t;var n=k-d.height();var r;var i;var o;if(s("weekMode")=="variable"){r=i=Math.floor(n/(M==1?2:6))}else{r=Math.floor(n/M);i=n-r*(M-1)}w.each(function(t,n){if(t<M){o=e(n);G(o.find("> div"),(t==M-1?i:r)-$(o))}});Mt()}function et(e){C=e;H.clear();O=0;if(W){O=d.find("th.fc-week-number").outerWidth()}A=Math.floor((C-O)/_);R(v.slice(0,-1),A)}function tt(e){e.click(nt).mousedown(l)}function nt(t){if(!s("selectable")){var n=L(e(this).data("date"));o("dayClick",this,n,true,t)}}function rt(e,t,n){if(n){D.build()}var r=S(i.visStart);var s=y(S(r),_);for(var o=0;o<M;o++){var u=new Date(Math.max(r,e));var a=new Date(Math.min(s,t));if(u<a){var f,l;if(B){f=N(a,r)*j+F+1;l=N(u,r)*j+F+1}else{f=N(u,r);l=N(a,r)}tt(it(o,f,o,l-1))}y(r,7);y(s,7)}}function it(e,n,r,i){var s=D.rect(e,n,r,i,t);return a(s,t)}function ut(e,t){return S(e)}function at(e,t,n){rt(e,y(S(t),1),true)}function ft(){f()}function lt(e,t,n){var r=gt(e);var i=b[r.row*_+r.col];o("dayClick",i,e,t,n)}function ct(e,t,n){P.start(function(e){f();if(e){it(e.row,e.col,e.row,e.col)}},t)}function ht(e,t,n){var r=P.stop();f();if(r){var i=yt(r);o("drop",e,i,true,t,n)}}function pt(e){return S(e.start)}function dt(e){return H.left(e)}function mt(e){return H.right(e)}function gt(e){return{row:Math.floor(N(e,i.visStart)/7),col:St(e.getDay())}}function yt(e){return bt(e.row,e.col)}function bt(e,t){return y(S(i.visStart),e*7+t*j+F)}function wt(e){return bt(Math.floor(e/_),e%_)}function St(e){return(e-Math.max(I,q)+_)%_*j+F}function kt(e){return g.eq(e)}function At(e){var t=0;if(W){t+=O}return{left:t,right:C}}function Ot(){G(t,t.height())}function Mt(){G(t,1)}var i=this;i.renderBasic=J;i.setHeight=Z;i.setWidth=et;i.renderDayOverlay=rt;i.defaultSelectionEnd=ut;i.renderSelection=at;i.clearSelection=ft;i.reportDayClick=lt;i.dragStart=ct;i.dragStop=ht;i.defaultEventEnd=pt;i.getHoverListener=function(){return P};i.colContentLeft=dt;i.colContentRight=mt;i.dayOfWeekCol=St;i.dateCell=gt;i.cellDate=yt;i.cellIsAllDay=function(){return true};i.allDayRow=kt;i.allDayBounds=At;i.getRowCnt=function(){return M};i.getColCnt=function(){return _};i.getColWidth=function(){return A};i.getDaySegmentContainer=function(){return T};Et.call(i,t,n,r);Tt.call(i);xt.call(i);vt.call(i);var s=i.opt;var o=i.trigger;var u=i.clearEvents;var a=i.renderOverlay;var f=i.clearOverlays;var l=i.daySelectionMousedown;var c=n.formatDate;var p;var d;var v;var m;var g;var b;var w;var x;var T;var C;var k;var A;var O;var M,_;var D;var P;var H;var B,j,F;var I;var q;var U;var z;var W;var X;var V;st(t.addClass("fc-grid"));D=new Nt(function(t,n){var r,i,s;v.each(function(t,o){r=e(o);i=r.offset().left;if(t){s[1]=i}s=[i];n[t]=s});s[1]=i+r.outerWidth();g.each(function(n,o){if(n<M){r=e(o);i=r.offset().top;if(n){s[1]=i}s=[i];t[n]=s}});s[1]=i+r.outerHeight()});P=new Ct(D);H=new Lt(function(e){return x.eq(e)})}function vt(){function E(e,t){o(e);b(T(e),t);r("eventAfterAllRender")}function x(){u();h().empty()}function T(n){var r=m(),i=g(),s=S(t.visStart),o=y(S(s),i),u=e.map(n,P),a,f,l,c,h,p,d=[];for(a=0;a<r;a++){f=I(F(n,u,s,o));for(l=0;l<f.length;l++){c=f[l];for(h=0;h<c.length;h++){p=c[h];p.row=a;p.level=l;d.push(p)}}y(s,7);y(o,7)}return d}function N(e,t,n){if(i(e)){C(e,t)}if(n.isEnd&&s(e)){w(e,t,n)}a(e,t)}function C(e,t){var i=p();var s;t.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(o,u){r("eventDragStart",t,e,o,u);l(e,t);i.start(function(r,i,o,u){t.draggable("option","revert",!r||!o&&!u);v();if(r){s=o*7+u*(n("isRTL")?-1:1);d(y(S(e.start),s),y(P(e),s))}else{s=0}},o,"drag")},stop:function(n,o){i.stop();v();r("eventDragStop",t,e,n,o);if(s){c(this,e,s,0,e.allDay,n,o)}else{t.css("filter","");f(e,t)}}})}var t=this;t.renderEvents=E;t.compileDaySegs=T;t.clearEvents=x;t.bindDaySeg=N;St.call(t);var n=t.opt;var r=t.trigger;var i=t.isEventDraggable;var s=t.isEventResizable;var o=t.reportEvents;var u=t.reportEventClear;var a=t.eventElementHandlers;var f=t.showEvents;var l=t.hideEvents;var c=t.eventDrop;var h=t.getDaySegmentContainer;var p=t.getHoverListener;var d=t.renderDayOverlay;var v=t.clearOverlays;var m=t.getRowCnt;var g=t.getColCnt;var b=t.renderDaySegs;var w=t.resizableDayEvent}function mt(e,t){function o(e,t){if(t){y(e,t*7)}var o=y(S(e),-((e.getDay()-r("firstDay")+7)%7));var u=y(S(o),7);var a=S(o);var f=S(u);var l=r("weekends");if(!l){T(a);T(f,-1,true)}n.title=s(a,y(S(f),-1),r("titleFormat"));n.start=o;n.end=u;n.visStart=a;n.visEnd=f;i(l?7:5)}var n=this;n.render=o;yt.call(n,e,t,"agendaWeek");var r=n.opt;var i=n.renderAgenda;var s=t.formatDates}function gt(e,t){function o(e,t){if(t){y(e,t);if(!r("weekends")){T(e,t<0?-1:1)}}var o=S(e,true);var u=y(S(o),1);n.title=s(e,r("titleFormat"));n.start=n.visStart=o;n.end=n.visEnd=u;i(1)}var n=this;n.render=o;yt.call(n,e,t,"agendaDay");var r=n.opt;var i=n.renderAgenda;var s=t.formatDate}function yt(n,r,i){function Mt(e){nt=e;_t();if(!m){Dt()}else{a()}Pt()}function _t(){ht=o("theme")?"ui":"fc";dt=o("weekends")?0:1;pt=o("firstDay");if(vt=o("isRTL")){mt=-1;gt=nt-1}else{mt=1;gt=0}yt=A(o("minTime"));wt=A(o("maxTime"));St=o("columnFormat");kt=o("weekNumbers");At=o("weekNumberTitle");if(o("weekNumberCalculation")!="iso"){Ot="w"}else{Ot="W"}Y=o("snapMinutes")||o("slotMinutes")}function Dt(){var t=ht+"-widget-header";var r=ht+"-widget-content";var i;var s;var u;var a;var f;var l=o("slotMinutes")%15==0;i="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+"<thead>"+"<tr>";if(kt){i+="<th class='fc-agenda-axis fc-week-number "+t+"'/>"}else{i+="<th class='fc-agenda-axis "+t+"'> </th>"}for(s=0;s<nt;s++){i+="<th class='fc- fc-col"+s+" "+t+"'/>"}i+="<th class='fc-agenda-gutter "+t+"'> </th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+t+"'> </th>";for(s=0;s<nt;s++){i+="<td class='fc- fc-col"+s+" "+r+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'> </div>"+"</div>"+"</div>"+"</td>"}i+="<td class='fc-agenda-gutter "+r+"'> </td>"+"</tr>"+"</tbody>"+"</table>";m=e(i).appendTo(n);g=m.find("thead");b=g.find("th").slice(1,-1);T=m.find("tbody");C=T.find("td").slice(0,-1);k=C.find("div.fc-day-content div");L=C.eq(0);O=L.find("> div");ot(g.add(g.find("tr")));ot(T.add(T.find("tr")));q=g.find("th:first");z=m.find(".fc-agenda-gutter");M=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n);if(o("allDaySlot")){_=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(M);i="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'>"+"<tr>"+"<th class='"+t+" fc-agenda-axis'>"+o("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+t+" fc-agenda-gutter'> </th>"+"</tr>"+"</table>";D=e(i).appendTo(M);P=D.find("tr");qt(P.find("td"));q=q.add(D.find("th:first"));z=z.add(D.find("th.fc-agenda-gutter"));M.append("<div class='fc-agenda-divider "+t+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")}else{_=e([])}H=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(M);B=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(H);j=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(B);i="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'>"+"<tbody>";u=x();a=w(S(u),wt);w(u,yt);rt=0;for(s=0;u<a;s++){f=u.getMinutes();i+="<tr class='fc-slot"+s+" "+(!f?"":"fc-minor")+"'>"+"<th class='fc-agenda-axis "+t+"'>"+(!l||!f?v(u,o("axisFormat")):" ")+"</th>"+"<td class='"+r+"'>"+"<div style='position:relative'> </div>"+"</td>"+"</tr>";w(u,o("slotMinutes"));rt++}i+="</tbody>"+"</table>";F=e(i).appendTo(B);I=F.find("div:first");Rt(F.find("td"));q=q.add(F.find("th:first"))}function Pt(){var e;var t;var n;var r;var i=E(new Date);if(kt){var s=v(Qt(0),Ot);if(vt){s=s+At}else{s=At+s}g.find(".fc-week-number").text(s)}for(e=0;e<nt;e++){r=Qt(e);t=b.eq(e);t.html(v(r,St));n=C.eq(e);if(+r==+i){n.addClass(ht+"-state-highlight fc-today")}else{n.removeClass(ht+"-state-highlight fc-today")}ut(t.add(n),r)}}function Ht(e,n){if(e===t){e=V}V=e;lt={};var r=T.position().top;var i=H.position().top;var s=Math.min(e-r,F.height()+i+1);O.height(s-$(L));M.css("top",r);H.height(s-i-1);G=I.height()+1;et=o("slotMinutes")/Y;tt=G/et;if(n){jt()}}function Bt(t){X=t;ft.clear();J=0;R(q.width("").each(function(t,n){J=Math.max(J,e(n).outerWidth())}),J);var n=H[0].clientWidth;Q=H.width()-n;if(Q){R(z,Q);z.show().prev().removeClass("fc-last")}else{z.hide().prev().addClass("fc-last")}K=Math.floor((n-J)/nt);R(b.slice(0,-1),K)}function jt(){function r(){H.scrollTop(n)}var e=x();var t=S(e);t.setHours(o("firstHour"));var n=Zt(e,t)+1;r();setTimeout(r,0)}function Ft(){ct=H.scrollTop()}function It(){H.scrollTop(ct)}function qt(e){e.click(Ut).mousedown(p)}function Rt(e){e.click(Ut).mousedown(an)}function Ut(e){if(!o("selectable")){var t=Math.min(nt-1,Math.floor((e.pageX-m.offset().left-J)/K));var n=Qt(t);var r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var i=parseInt(r[1])*o("slotMinutes");var s=Math.floor(i/60);n.setHours(s);n.setMinutes(i%60+yt);u("dayClick",C[t],n,false,e)}else{u("dayClick",C[t],n,true,e)}}}function zt(e,t,n){if(n){it.build()}var r=S(s.visStart);var i,o;if(vt){i=N(t,r)*mt+gt+1;o=N(e,r)*mt+gt+1}else{i=N(e,r);o=N(t,r)}i=Math.max(0,i);o=Math.min(nt,o);if(i<o){qt(Wt(0,i,0,o-1))}}function Wt(e,t,n,r){var i=it.rect(e,t,n,r,M);return f(i,M)}function Xt(e,t){var n=S(s.visStart);var r=y(S(n),1);for(var i=0;i<nt;i++){var o=new Date(Math.max(n,e));var u=new Date(Math.min(r,t));if(o<u){var a=i*mt+gt;var l=it.rect(0,a,0,a,B);var c=Zt(n,o);var h=Zt(n,u);l.top=c;l.height=h-c;Rt(f(l,B))}y(n,1);y(r,1)}}function Vt(e){return ft.left(e)}function $t(e){return ft.right(e)}function Jt(e){return{row:Math.floor(N(e,s.visStart)/7),col:Yt(e.getDay())}}function Kt(e){var t=Qt(e.col);var n=e.row;if(o("allDaySlot")){n--}if(n>=0){w(t,yt+n*Y)}return t}function Qt(e){return y(S(s.visStart),e*mt+gt)}function Gt(e){return o("allDaySlot")&&!e.row}function Yt(e){return(e-Math.max(pt,dt)+nt)%nt*mt+gt}function Zt(e,n){e=S(e,true);if(n<w(S(e),yt)){return 0}if(n>=w(S(e),wt)){return F.height()}var r=o("slotMinutes"),i=n.getHours()*60+n.getMinutes()-yt,s=Math.floor(i/r),u=lt[s];if(u===t){u=lt[s]=F.find("tr:eq("+s+") td div")[0].offsetTop}return Math.max(0,Math.round(u-1+G*(i%r/r)))}function en(){return{left:J,right:X-Q}}function tn(e){return P}function nn(e){var t=S(e.start);if(e.allDay){return t}return w(t,o("defaultEventMinutes"))}function rn(e,t){if(t){return S(e)}return w(S(e),o("slotMinutes"))}function sn(e,t,n){if(n){if(o("allDaySlot")){zt(e,y(S(t),1),true)}}else{on(e,t)}}function on(t,n){var r=o("selectHelper");it.build();if(r){var i=N(t,s.visStart)*mt+gt;if(i>=0&&i<nt){var u=it.rect(0,i,0,i,B);var a=Zt(t,t);var f=Zt(t,n);if(f>a){u.top=a;u.height=f-a;u.left+=2;u.width-=5;if(e.isFunction(r)){var l=r(t,n);if(l){u.position="absolute";u.zIndex=8;W=e(l).css(u).appendTo(B)}}else{u.isStart=true;u.isEnd=true;W=e(d({title:"",start:t,end:n,className:["fc-select-helper"],editable:false},u));W.css("opacity",o("dragOpacity"))}if(W){Rt(W);B.append(W);R(W,u.width,true);U(W,u.height,true)}}}}else{Xt(t,n)}}function un(){l();if(W){W.remove();W=null}}function an(t){if(t.which==1&&o("selectable")){h(t);var n;at.start(function(e,t){un();if(e&&e.col==t.col&&!Gt(e)){var r=Kt(t);var i=Kt(e);n=[r,w(S(r),Y),i,w(S(i),Y)].sort(Z);on(n[0],n[3])}else{n=null}},t);e(document).one("mouseup",function(e){at.stop();if(n){if(+n[0]==+n[1]){fn(n[0],false,e)}c(n[0],n[3],false,e)}})}}function fn(e,t,n){u("dayClick",C[Yt(e.getDay())],e,t,n)}function ln(e,t,n){at.start(function(e){l();if(e){if(Gt(e)){Wt(e.row,e.col,e.row,e.col)}else{var t=Kt(e);var n=w(S(t),o("defaultEventMinutes"));Xt(t,n)}}},t)}function cn(e,t,n){var r=at.stop();l();if(r){u("drop",e,Kt(r),Gt(r),t,n)}}var s=this;s.renderAgenda=Mt;s.setWidth=Bt;s.setHeight=Ht;s.beforeHide=Ft;s.afterShow=It;s.defaultEventEnd=nn;s.timePosition=Zt;s.dayOfWeekCol=Yt;s.dateCell=Jt;s.cellDate=Kt;s.cellIsAllDay=Gt;s.allDayRow=tn;s.allDayBounds=en;s.getHoverListener=function(){return at};s.colContentLeft=Vt;s.colContentRight=$t;s.getDaySegmentContainer=function(){return _};s.getSlotSegmentContainer=function(){return j};s.getMinMinute=function(){return yt};s.getMaxMinute=function(){return wt};s.getBodyContent=function(){return B};s.getRowCnt=function(){return 1};s.getColCnt=function(){return nt};s.getColWidth=function(){return K};s.getSnapHeight=function(){return tt};s.getSnapMinutes=function(){return Y};s.defaultSelectionEnd=rn;s.renderDayOverlay=zt;s.renderSelection=sn;s.clearSelection=un;s.reportDayClick=fn;s.dragStart=ln;s.dragStop=cn;Et.call(s,n,r,i);Tt.call(s);xt.call(s);bt.call(s);var o=s.opt;var u=s.trigger;var a=s.clearEvents;var f=s.renderOverlay;var l=s.clearOverlays;var c=s.reportSelection;var h=s.unselect;var p=s.daySelectionMousedown;var d=s.slotSegHtml;var v=r.formatDate;var m;var g;var b;var T;var C;var k;var L;var O;var M;var _;var D;var P;var H;var B;var j;var F;var I;var q;var z;var W;var X;var V;var J;var K;var Q;var G;var Y;var et;var tt;var nt;var rt;var it;var at;var ft;var lt={};var ct;var ht;var pt;var dt;var vt,mt,gt;var yt,wt;var St;var kt;var At;var Ot;st(n.addClass("fc-agenda"));it=new Nt(function(t,n){function l(e){return Math.max(a,Math.min(f,e))}var r,i,s;b.each(function(t,o){r=e(o);i=r.offset().left;if(t){s[1]=i}s=[i];n[t]=s});s[1]=i+r.outerWidth();if(o("allDaySlot")){r=P;i=r.offset().top;t[0]=[i,i+r.outerHeight()]}var u=B.offset().top;var a=H.offset().top;var f=a+H.outerHeight();for(var c=0;c<rt*et;c++){t.push([l(u+tt*c),l(u+tt*(c+1))])}});at=new Ct(it);ft=new Lt(function(e){return k.eq(e)})}function bt(){function J(e,t){a(e);var n,s=e.length,o=[],u=[];for(n=0;n<s;n++){if(e[n].allDay){o.push(e[n])}else{u.push(e[n])}}if(r("allDaySlot")){T(Q(o),t);c()}Z(G(u),t);i("eventAfterAllRender")}function K(){f();h().empty();p().empty()}function Q(t){var r=I(F(t,e.map(t,P),n.visStart,n.visEnd)),i,s=r.length,o,u,a,f=[];for(i=0;i<s;i++){o=r[i];for(u=0;u<o.length;u++){a=o[u];a.row=0;a.level=i;f.push(a)}}return f}function G(t){var r=C(),i=g(),s=m(),o=w(S(n.visStart),i),u=e.map(t,Y),a,f,l,c,h,p,d=[];for(a=0;a<r;a++){f=I(F(t,u,o,w(S(o),s-i)));wt(f);for(l=0;l<f.length;l++){c=f[l];for(h=0;h<c.length;h++){p=c[h];p.col=a;p.level=l;d.push(p)}}y(o,1,true)}return d}function Y(e){if(e.end){return S(e.end)}else{return w(S(e.start),r("defaultEventMinutes"))}}function Z(n,s){var o,u=n.length,a,f,l,c,h,d,v,m,g,y,w,S,T="",N,k,L,A={},O={},_,D,P,H,B=p(),j,F,I,R=C();if(j=r("isRTL")){F=-1;I=R-1}else{F=1;I=0}for(o=0;o<u;o++){a=n[o];f=a.event;c=b(a.start,a.start);h=b(a.start,a.end);d=a.col;v=a.level;m=a.forward||0;g=E(d*F+I);y=x(d*F+I)-g;y=Math.min(y-6,y*.95);if(v){w=y/(v+m+1)}else{if(m){w=(y/(m+1)-12/2)*2}else{w=y}}S=g+y/(v+m+1)*v*F+(j?y-w:0);a.top=c;a.left=S;a.outerWidth=w;a.outerHeight=h-c;T+=et(f,a)}B[0].innerHTML=T;N=B.children();for(o=0;o<u;o++){a=n[o];f=a.event;k=e(N[o]);L=i("eventRender",f,f,k);if(L===false){k.remove()}else{if(L&&L!==true){k.remove();k=e(L).css({position:"absolute",top:a.top,left:a.left}).appendTo(B)}a.element=k;if(f._id===s){nt(f,k,a)}else{k[0]._fci=o}M(f,k)}}q(B,n,nt);for(o=0;o<u;o++){a=n[o];if(k=a.element){D=A[_=a.key=it(k[0])];a.vsides=D===t?A[_]=$(k,true):D;D=O[_];a.hsides=D===t?O[_]=z(k,true):D;P=k.find(".fc-event-title");if(P.length){a.contentTop=P[0].offsetTop}}}for(o=0;o<u;o++){a=n[o];if(k=a.element){k[0].style.width=Math.max(0,a.outerWidth-a.hsides)+"px";H=Math.max(0,a.outerHeight-a.vsides);k[0].style.height=H+"px";f=a.event;if(a.contentTop!==t&&H-a.contentTop<10){k.find("div.fc-event-time").text(X(f.start,r("timeFormat"))+" - "+f.title);k.find("div.fc-event-title").remove()}i("eventAfterRender",f,f,k)}}}function et(e,t){var n="<";var i=e.url;var u=at(e,r);var a=["fc-event","fc-event-vert"];if(s(e)){a.push("fc-event-draggable")}if(t.isStart){a.push("fc-event-start")}if(t.isEnd){a.push("fc-event-end")}a=a.concat(e.className);if(e.source){a=a.concat(e.source.className||[])}if(i){n+="a href='"+rt(e.url)+"'"}else{n+="div"}n+=" class='"+a.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+t.top+"px;left:"+t.left+"px;"+u+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+rt(V(e.start,e.end,r("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+rt(e.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>";if(t.isEnd&&o(e)){n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"}n+="</"+(i?"a":"div")+">";return n}function tt(e,t,n){if(s(e)){st(e,t,n.isStart)}if(n.isEnd&&o(e)){N(e,t,n)}l(e,t)}function nt(e,t,n){var r=t.find("div.fc-event-time");if(s(e)){ot(e,t,r)}if(n.isEnd&&o(e)){ut(e,t,r)}l(e,t)}function st(e,t,n){function b(){if(!u){t.width(s).height("").draggable("option","grid",null);u=true}}var s;var o;var u=true;var a;var f=r("isRTL")?-1:1;var l=d();var c=k();var h=L();var p=A();var m=g();t.draggable({zIndex:9,opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(d,m){i("eventDragStart",t,e,d,m);D(e,t);s=t.width();l.start(function(i,s,l,d){R();if(i){o=false;a=d*f;if(!i.row){j(y(S(e.start),a),y(P(e),a));b()}else{if(n){if(u){t.width(c-10);U(t,h*Math.round((e.end?(e.end-e.start)/v:r("defaultEventMinutes"))/p));t.draggable("option","grid",[c,1]);u=false}}else{o=true}}o=o||u&&!a}else{b();o=true}t.draggable("option","revert",o)},d,"drag")},stop:function(n,r){l.stop();R();i("eventDragStop",t,e,n,r);if(o){b();t.css("filter","");_(e,t)}else{var s=0;if(!u){s=Math.round((t.offset().top-O().offset().top)/h)*p+m-(e.start.getHours()*60+e.start.getMinutes())}H(this,e,a,s,u,n,r)}}})}function ot(e,t,n){function g(t){var i=w(S(e.start),t);var s;if(e.end){s=w(S(e.end),t)}n.text(V(i,s,r("timeFormat")))}function b(){if(o){n.css("display","");t.draggable("option","grid",[p,v]);o=false}}var s;var o=false;var u;var a;var f;var l=r("isRTL")?-1:1;var c=d();var h=C();var p=k();var v=L();var m=A();t.draggable({zIndex:9,scroll:false,grid:[p,v],axis:h==1?"y":false,opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(h,p){i("eventDragStart",t,e,h,p);D(e,t);s=t.position();a=f=0;c.start(function(i,s,a,f){t.draggable("option","revert",!i);R();if(i){u=f*l;if(r("allDaySlot")&&!i.row){if(!o){o=true;n.hide();t.draggable("option","grid",null)}j(y(S(e.start),u),y(P(e),u))}else{b()}}},h,"drag")},drag:function(e,t){a=Math.round((t.position.top-s.top)/v)*m;if(a!=f){if(!o){g(a)}f=a}},stop:function(n,r){var f=c.stop();R();i("eventDragStop",t,e,n,r);if(f&&(u||a||o)){H(this,e,u,o?0:a,o,n,r)}else{b();t.css("filter","");t.css(s);g(0);_(e,t)}}})}function ut(e,t,n){var s,o;var a=L();var f=A();t.resizable({handles:{s:".ui-resizable-handle"},grid:a,start:function(n,r){s=o=0;D(e,t);t.css("z-index",9);i("eventResizeStart",this,e,n,r)},resize:function(i,l){s=Math.round((Math.max(a,t.height())-l.originalSize.height)/a);if(s!=o){n.text(V(e.start,!s&&!e.end?null:w(u(e),f*s),r("timeFormat")));o=s}},stop:function(n,r){i("eventResizeStop",this,e,n,r);if(s){B(this,e,0,f*s,n,r)}else{t.css("z-index",8);_(e,t)}}})}var n=this;n.renderEvents=J;n.compileDaySegs=Q;n.clearEvents=K;n.slotSegHtml=et;n.bindDaySeg=tt;St.call(n);var r=n.opt;var i=n.trigger;var s=n.isEventDraggable;var o=n.isEventResizable;var u=n.eventEnd;var a=n.reportEvents;var f=n.reportEventClear;var l=n.eventElementHandlers;var c=n.setHeight;var h=n.getDaySegmentContainer;var p=n.getSlotSegmentContainer;var d=n.getHoverListener;var m=n.getMaxMinute;var g=n.getMinMinute;var b=n.timePosition;var E=n.colContentLeft;var x=n.colContentRight;var T=n.renderDaySegs;var N=n.resizableDayEvent;var C=n.getColCnt;var k=n.getColWidth;var L=n.getSnapHeight;var A=n.getSnapMinutes;var O=n.getBodyContent;var M=n.reportEventElement;var _=n.showEvents;var D=n.hideEvents;var H=n.eventDrop;var B=n.eventResize;var j=n.renderDayOverlay;var R=n.clearOverlays;var W=n.calendar;var X=W.formatDate;var V=W.formatDates}function wt(e){var t,n,r,i,s,o;for(t=e.length-1;t>0;t--){i=e[t];for(n=0;n<i.length;n++){s=i[n];for(r=0;r<e[t-1].length;r++){o=e[t-1][r];if(j(s,o)){o.forward=Math.max(o.forward||0,(s.forward||0)+1)}}}}}function Et(e,n,r){function h(e,t){var n=c[e];if(typeof n=="object"){return nt(n,t||r)}return n}function p(e,t){return n.trigger.apply(n,[e,t||i].concat(Array.prototype.slice.call(arguments,2),[i]))}function d(e){return m(e)&&!h("disableDragging")}function v(e){return m(e)&&!h("disableResizing")}function m(e){return lt(e.editable,(e.source||{}).editable,h("editable"))}function g(e){a={};var t,n=e.length,r;for(t=0;t<n;t++){r=e[t];if(a[r._id]){a[r._id].push(r)}else{a[r._id]=[r]}}}function b(e){return e.end?S(e.end):s(e)}function E(e,t){f.push(t);if(l[e._id]){l[e._id].push(t)}else{l[e._id]=[t]}}function x(){f=[];l={}}function T(e,t){t.click(function(n){if(!t.hasClass("ui-draggable-dragging")&&!t.hasClass("ui-resizable-resizing")){return p("eventClick",this,e,n)}}).hover(function(t){p("eventMouseover",this,e,t)},function(t){p("eventMouseout",this,e,t)})}function N(e,t){k(e,t,"show")}function C(e,t){k(e,t,"hide")}function k(e,t,n){var r=l[e._id],i,s=r.length;for(i=0;i<s;i++){if(!t||r[i][0]!=t[0]){r[i][n]()}}}function L(e,t,n,r,i,s,o){var f=t.allDay;var l=t._id;O(a[l],n,r,i);p("eventDrop",e,t,n,r,i,function(){O(a[l],-n,-r,f);u(l)},s,o);u(l)}function A(e,t,n,r,i,s){var o=t._id;M(a[o],n,r);p("eventResize",e,t,n,r,function(){M(a[o],-n,-r);u(o)},i,s);u(o)}function O(e,n,r,i){r=r||0;for(var s,u=e.length,a=0;a<u;a++){s=e[a];if(i!==t){s.allDay=i}w(y(s.start,n,true),r);if(s.end){s.end=w(y(s.end,n,true),r)}o(s,c)}}function M(e,t,n){n=n||0;for(var r,i=e.length,s=0;s<i;s++){r=e[s];r.end=w(y(b(r),t,true),n);o(r,c)}}var i=this;i.element=e;i.calendar=n;i.name=r;i.opt=h;i.trigger=p;i.isEventDraggable=d;i.isEventResizable=v;i.reportEvents=g;i.eventEnd=b;i.reportEventElement=E;i.reportEventClear=x;i.eventElementHandlers=T;i.showEvents=N;i.hideEvents=C;i.eventDrop=L;i.eventResize=A;var s=i.defaultEventEnd;var o=n.normalizeEvent;var u=n.reportEventChange;var a={};var f=[];var l={};var c=n.options}function St(){function O(e,t){var n=T();var r;var i=h();var s=p();var o=0;var u;var a;var f;var l;var c=e.length;var d;var v;var m;n[0].innerHTML=_(e);D(e,n.children());P(e);H(e,n,t);B(e);j(e);F(e);r=I();for(u=0;u<i;u++){a=0;f=[];for(l=0;l<s;l++){f[l]=0}while(o<c&&(d=e[o]).row==u){v=et(f.slice(d.startCol,d.endCol));d.top=v;v+=d.outerHeight;for(m=d.startCol;m<d.endCol;m++){f[m]=v}o++}r[u].height(et(f))}U(e,R(r))}function M(t,n,r){var i=e("<div/>");var s;var o=T();var u;var a=t.length;var f;i[0].innerHTML=_(t);s=i.children();o.append(s);D(t,s);B(t);j(t);F(t);U(t,R(I()));s=[];for(u=0;u<a;u++){f=t[u].element;if(f){if(t[u].row===n){f.css("top",r)}s.push(f[0])}}return e(s)}function _(e){var t=r("isRTL");var n;var i=e.length;var u;var a;var f;var l;var c=m();var h=c.left;var p=c.right;var d;var v;var y;var E;var S;var x="";for(n=0;n<i;n++){u=e[n];a=u.event;l=["fc-event","fc-event-hori"];if(s(a)){l.push("fc-event-draggable")}if(u.isStart){l.push("fc-event-start")}if(u.isEnd){l.push("fc-event-end")}if(t){d=w(u.end.getDay()-1);v=w(u.start.getDay());y=u.isEnd?g(d):h;E=u.isStart?b(v):p}else{d=w(u.start.getDay());v=w(u.end.getDay()-1);y=u.isStart?g(d):h;E=u.isEnd?b(v):p}l=l.concat(a.className);if(a.source){l=l.concat(a.source.className||[])}f=a.url;S=at(a,r);if(f){x+="<a href='"+rt(f)+"'"}else{x+="<div"}x+=" class='"+l.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+y+"px;"+S+"'"+">"+"<div class='fc-event-inner'>";if(!a.allDay&&u.isStart){x+="<span class='fc-event-time'>"+rt(C(a.start,a.end,r("timeFormat")))+"</span>"}x+="<span class='fc-event-title'>"+rt(a.title)+"</span>"+"</div>";if(u.isEnd&&o(a)){x+="<div class='ui-resizable-handle ui-resizable-"+(t?"w":"e")+"'>"+"   "+"</div>"}x+="</"+(f?"a":"div")+">";u.left=y;u.outerWidth=E-y;u.startCol=d;u.endCol=v+1}return x}function D(t,n){var r;var s=t.length;var o;var u;var a;var f;for(r=0;r<s;r++){o=t[r];u=o.event;a=e(n[r]);f=i("eventRender",u,u,a);if(f===false){a.remove()}else{if(f&&f!==true){f=e(f).css({position:"absolute",left:o.left});a.replaceWith(f);a=f}o.element=a}}}function P(e){var t;var n=e.length;var r;var i;for(t=0;t<n;t++){r=e[t];i=r.element;if(i){a(r.event,i)}}}function H(e,t,n){var r;var i=e.length;var s;var o;var u;for(r=0;r<i;r++){s=e[r];o=s.element;if(o){u=s.event;if(u._id===n){N(u,o,s)}else{o[0]._fci=r}}}q(t,e,N)}function B(e){var n;var r=e.length;var i;var s;var o,u;var a={};for(n=0;n<r;n++){i=e[n];s=i.element;if(s){o=i.key=it(s[0]);u=a[o];if(u===t){u=a[o]=z(s,true)}i.hsides=u}}}function j(e){var t;var n=e.length;var r;var i;for(t=0;t<n;t++){r=e[t];i=r.element;if(i){i[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px"}}}function F(e){var n;var r=e.length;var i;var s;var o,u;var a={};for(n=0;n<r;n++){i=e[n];s=i.element;if(s){o=i.key;u=a[o];if(u===t){u=a[o]=K(s)}i.outerHeight=s[0].offsetHeight+u}}}function I(){var e;var t=h();var n=[];for(e=0;e<t;e++){n[e]=v(e).find("div.fc-day-content > div")}return n}function R(e){var t;var n=e.length;var r=[];for(t=0;t<n;t++){r[t]=e[t][0].offsetTop}return r}function U(e,t){var n;var r=e.length;var s;var o;var u;for(n=0;n<r;n++){s=e[n];o=s.element;if(o){o[0].style.top=t[s.row]+(s.top||0)+"px";u=s.event;i("eventAfterRender",u,u,o)}}}function W(t,s,o){var a=r("isRTL");var d=a?"w":"e";var v=s.find(".ui-resizable-"+d);var m=false;st(s);s.mousedown(function(e){e.preventDefault()}).click(function(e){if(m){e.preventDefault();e.stopImmediatePropagation()}});v.mousedown(function(r){function P(n){i("eventResizeStop",this,t,n);e("body").css("cursor","");v.stop();L();if(C){c(this,t,C,0,n)}setTimeout(function(){m=false},0)}if(r.which!=1){return}m=true;var v=n.getHoverListener();var g=h();var b=p();var w=a?-1:1;var T=a?b-1:0;var N=s.css("top");var C;var O;var _=e.extend({},t);var D=E(t.start);A();e("body").css("cursor",d+"-resize").one("mouseup",P);i("eventResizeStart",this,t,r);v.start(function(e,n){if(e){var r=Math.max(D.row,e.row);var i=e.col;if(g==1){r=0}if(r==D.row){if(a){i=Math.min(D.col,i)}else{i=Math.max(D.col,i)}}C=r*7+i*w+T-(n.row*7+n.col*w+T);var s=y(u(t),C,true);if(C){_.end=s;var c=O;O=M(x([_]),o.row,N);O.find("*").css("cursor",d+"-resize");if(c){c.remove()}l(t)}else{if(O){f(t);O.remove();O=null}}L();k(t.start,y(S(s),1))}},r)})}var n=this;n.renderDaySegs=O;n.resizableDayEvent=W;var r=n.opt;var i=n.trigger;var s=n.isEventDraggable;var o=n.isEventResizable;var u=n.eventEnd;var a=n.reportEventElement;var f=n.showEvents;var l=n.hideEvents;var c=n.eventResize;var h=n.getRowCnt;var p=n.getColCnt;var d=n.getColWidth;var v=n.allDayRow;var m=n.allDayBounds;var g=n.colContentLeft;var b=n.colContentRight;var w=n.dayOfWeekCol;var E=n.dateCell;var x=n.compileDaySegs;var T=n.getDaySegmentContainer;var N=n.bindDaySeg;var C=n.calendar.formatDates;var k=n.renderDayOverlay;var L=n.clearOverlays;var A=n.clearSelection}function xt(){function a(e,t,n){f();if(!t){t=i(e,n)}s(e,t,n);l(e,t,n)}function f(e){if(u){u=false;o();r("unselect",null,e)}}function l(e,t,n,i){u=true;r("select",null,e,t,n,i)}function c(r){var i=t.cellDate;var u=t.cellIsAllDay;var a=t.getHoverListener();var c=t.reportDayClick;if(r.which==1&&n("selectable")){f(r);var h=this;var p;a.start(function(e,t){o();if(e&&u(e)){p=[i(t),i(e)].sort(Z);s(p[0],p[1],true)}else{p=null}},r);e(document).one("mouseup",function(e){a.stop();if(p){if(+p[0]==+p[1]){c(p[0],true,e)}l(p[0],p[1],true,e)}})}}var t=this;t.select=a;t.unselect=f;t.reportSelection=l;t.daySelectionMousedown=c;var n=t.opt;var r=t.trigger;var i=t.defaultSelectionEnd;var s=t.renderSelection;var o=t.clearSelection;var u=false;if(n("selectable")&&n("unselectAuto")){e(document).mousedown(function(t){var r=n("unselectCancel");if(r){if(e(t.target).parents(r).length){return}}f(t)})}}function Tt(){function i(t,i){var s=r.shift();if(!s){s=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")}if(s[0].parentNode!=i[0]){s.appendTo(i)}n.push(s.css(t).show());return s}function s(){var e;while(e=n.shift()){r.push(e.hide().unbind())}}var t=this;t.renderOverlay=i;t.clearOverlays=s;var n=[];var r=[]}function Nt(e){var t=this;var n;var r;t.build=function(){n=[];r=[];e(n,r)};t.cell=function(e,t){var i=n.length;var s=r.length;var o,u=-1,a=-1;for(o=0;o<i;o++){if(t>=n[o][0]&&t<n[o][1]){u=o;break}}for(o=0;o<s;o++){if(e>=r[o][0]&&e<r[o][1]){a=o;break}}return u>=0&&a>=0?{row:u,col:a}:null};t.rect=function(e,t,i,s,o){var u=o.offset();return{top:n[e][0]-u.top,left:r[t][0]-u.left,width:r[s][1]-r[t][0],height:n[i][1]-n[e][0]}}}function Ct(t){function u(e){kt(e);var n=t.cell(e.pageX,e.pageY);if(!n!=!o||n&&(n.row!=o.row||n.col!=o.col)){if(n){if(!s){s=n}i(n,s,n.row-s.row,n.col-s.col)}else{i(n,s)}o=n}}var n=this;var r;var i;var s;var o;n.start=function(n,a,f){i=n;s=o=null;t.build();u(a);r=f||"mousemove";e(document).bind(r,u)};n.stop=function(){e(document).unbind(r,u);return o}}function kt(e){if(e.pageX===t){e.pageX=e.originalEvent.pageX;e.pageY=e.originalEvent.pageY}}function Lt(e){function o(t){return r[t]=r[t]||e(t)}var n=this,r={},i={},s={};n.left=function(e){return i[e]=i[e]===t?o(e).position().left:i[e]};n.right=function(e){return s[e]=s[e]===t?n.left(e)+o(e).width():s[e]};n.clear=function(){r={};i={};s={}}}var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>‹</span>",next:"<span class='fc-text-arrow'>›</span>",prevYear:"<span class='fc-text-arrow'>«</span>",nextYear:"<span class='fc-text-arrow'>»</span>",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"};var r={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>›</span>",next:"<span class='fc-text-arrow'>‹</span>",prevYear:"<span class='fc-text-arrow'>»</span>",nextYear:"<span class='fc-text-arrow'>«</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}};var i=e.fullCalendar={version:"1.6.1"};var s=i.views={};e.fn.fullCalendar=function(i){if(typeof i=="string"){var s=Array.prototype.slice.call(arguments,1);var o;this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[i])){var r=n[i].apply(n,s);if(o===t){o=r}if(i=="destroy"){e.removeData(this,"fullCalendar")}}});if(o!==t){return o}return this}var a=i.eventSources||[];delete i.eventSources;if(i.events){a.push(i.events);delete i.events}i=e.extend(true,{},n,i.isRTL||i.isRTL===t&&n.isRTL?r:{},i);this.each(function(t,n){var r=e(n);var s=new u(r,i,a);r.data("fullCalendar",s);s.render()});return this};i.sourceNormalizers=[];i.sourceFetchers=[];var f={dataType:"json",cache:false};var l=1;i.addDays=y;i.cloneDate=S;i.parseDate=k;i.parseISO8601=L;i.parseTime=A;i.formatDate=O;i.formatDates=M;var h=["sun","mon","tue","wed","thu","fri","sat"],p=864e5,d=36e5,v=6e4;var _={s:function(e){return e.getSeconds()},ss:function(e){return tt(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return tt(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return tt(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return tt(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return tt(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return tt(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return O(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();if(t>10&&t<20){return"th"}return["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return D(e)}};i.dateFormatters=_;i.applyAll=ft;s.month=ct;s.basicWeek=ht;s.basicDay=pt;o({weekMode:"fixed"});s.agendaWeek=mt;s.agendaDay=gt;o({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24});})(jQuery)
